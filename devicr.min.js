/*! devicr 21-10-2013 */
function ArrayIntersect(){}function Devicr(a){this.image_selector=a}function DevicrDevice(a,b){this.device=a,this.screen_device=b}function DevicrImage(a){this.devices=["retina","desktop","tablet","mobile"],this.image=a,this.image.removeAttribute("src"),this.getHigherDevices=function(a){var b=this.devices.indexOf(a),c=[];if(b>0)for(var d=0;b>d;d++)c[d]=this.devices[d];return c}}function DevicrImageFinder(a){this.devicr_device=a}function DevicrImageSelector(a,b){this.device=a,this.finder=b}function ScreenDevice(){}ArrayIntersect.intersect=function(a,b){for(var c=0,d=0,e=[];c<a.length&&d<b.length;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e},Devicr.prototype.adapt=function(a){var b=this.image_selector.getBestSourceFor(a);a.replaceSourceWith(b)},DevicrDevice.prototype.getDevice=function(){return this.device},DevicrDevice.prototype.isMobile=function(){return"mobile"===this.device},DevicrDevice.prototype.isTablet=function(){return"tablet"===this.device},DevicrDevice.prototype.isDesktop=function(){return"desktop"===this.device},DevicrDevice.prototype.isInLandscapeMode=function(){return this.screen_device.getHeight()<this.screen_device.getWidth()},DevicrDevice.prototype.isInPortraitMode=function(){return this.screen_device.getHeight()>=this.screen_device.getWidth()},DevicrDevice.prototype.hasRetinaPixelRatio=function(){return this.screen_device.getDevicePixelRatio()>1},DevicrImage.prototype.imageLoaded=function(){return this.image.getAttribute("src")},DevicrImage.prototype.getImageFor=function(a){return this.image.getAttribute(a)},DevicrImage.prototype.replaceImageLoadedBy=function(a){this.image.setAttribute("src",a)},DevicrImage.prototype.getAvailableDevices=function(){var a=this.devices,b=[],c=null;for(var d in a)c=this.getImageFor(a[d]),null!==c&&""!==c&&b.push(a[d]);return b},DevicrImage.prototype.getHigherAvailableDevicesThan=function(a){var b=this.getHigherDevices(a);if(b.length>0){var c=this.getAvailableDevices();return ArrayIntersect.intersect(b,c)}return[]},DevicrImageFinder.prototype.findHighestAvailableImage=function(a){var b=a.getAvailableDevices();return 0===b.length?null:a.getImageFor(b.shift())},DevicrImageFinder.prototype.findFirstHigherAvailableImage=function(a){var b=a.getHigherAvailableDevicesThan(this.devicr_device.getDevice());return 0===b.length?null:a.getImageFor(b.pop())},DevicrImageSelector.prototype.getBestSourceFor=function(a){return this.device.getDevice(),this.device.isInLandscapeMode()?this.getBestLandscapeSourceFor(a):this.getBestPortraitSourceFor(a)},DevicrImageSelector.prototype.getBestLandscapeSourceFor=function(a){return this.device.hasRetinaPixelRatio()?this.getBestLandscapeSourceWithRetinaDisplayFor(a):this.getBestLandscapeSourceWithoutRetinaDisplayFor(a)},DevicrImageSelector.prototype.getBestPortraitSourceFor=function(a){var b=a.getImageFor(this.device.getDevice());return null===b&&(b=this.finder.findFirstHigherAvailableImage(a,this.device.getDevice())),null===b?this.finder.findHighestAvailableImage(a):b},DevicrImageSelector.prototype.getBestLandscapeSourceWithRetinaDisplayFor=function(a){return this.finder.findHighestAvailableImage(a)},DevicrImageSelector.prototype.getBestLandscapeSourceWithoutRetinaDisplayFor=function(a){var b=a.getImageFor("desktop");return null===b?this.finder.findHighestAvailableImage(a):b},ScreenDevice.prototype.getHeight=function(){return window.innerHeight},ScreenDevice.prototype.getWidth=function(){return window.innerWidth},ScreenDevice.prototype.getDevicePixelRatio=function(){return window.devicePixelRatio};